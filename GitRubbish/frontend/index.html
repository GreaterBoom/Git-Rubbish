<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦–é¡µ - GitRubbish</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
</head>
<body class="bg-gray-50">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="border-b-2 border-black sticky top-0 bg-white z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <img src="picture/002.jpg" alt="GitRubbish Logo" class="w-10 h-10" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                <div class="w-10 h-10 bg-black text-white hidden items-center justify-center font-bold text-lg">
                    GR
                </div>
                <h1 class="text-2xl font-bold">GitRubbish</h1>
            </div>
            
            <nav class="hidden md:flex items-center gap-2">
                <a href="index.html" class="font-bold px-3 py-2 bg-black text-white transition text-sm">é¦–é¡µ</a>
                <a href="chat.html" class="font-bold px-3 py-2 hover:bg-gray-100 transition text-sm">èŠå¤©</a>
                <a href="users.html" class="font-bold px-3 py-2 hover:bg-gray-100 transition text-sm">ç¤¾åŒºæˆå‘˜</a>
            </nav>
            
            <div class="flex items-center gap-4">
                <!-- æ•°ç æ—¶é’Ÿ -->
                <div class="hidden lg:block">
                    <div id="digitalClock" class="font-mono text-lg font-bold bg-black text-green-400 px-4 py-2 border-2 border-black"></div>
                </div>
                
                <div class="relative hidden md:block">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="æœç´¢æ–‡ç« ..."
                        class="px-4 py-2 border-2 border-black w-64 focus:outline-none focus:border-gray-600 transition"
                    >
                    <button onclick="handleSearch()" class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-600 hover:text-black">
                        ğŸ”
                    </button>
                </div>
                
                <div id="userActions" class="flex items-center gap-3"></div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <!-- çƒ­æœæ¦œå’Œæ¯æ—¥ä¸€è¨€ -->
        <div class="mb-8 grid grid-cols-1 lg:grid-cols-2 gap-4">
            <!-- çƒ­æœæ¦œ -->
            <div class="bg-gradient-to-r from-orange-50 to-red-50 border-2 border-black p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] relative overflow-hidden h-[320px] flex flex-col">
                <div class="absolute top-0 right-0 text-5xl opacity-10">ğŸ”¥</div>
                <div class="relative z-10 flex flex-col h-full">
                    <div class="flex items-center justify-between mb-3 flex-shrink-0">
                        <div class="flex items-center gap-2">
                            <span class="text-xl">ğŸ”¥</span>
                            <h3 class="font-bold">å®æ—¶çƒ­æœ</h3>
                        </div>
                        <select 
                            id="hotType" 
                            onchange="loadHotSearch()" 
                            class="px-2 py-1 border-2 border-black text-xs font-bold focus:outline-none"
                        >
                            <option value="bilihot">å“”å“©å“”å“©</option>
                            <option value="csdn">CSDN</option>
                            <option value="zhihu">çŸ¥ä¹</option>
                            <option value="weibo">å¾®åš</option>
                            <option value="douyin">æŠ–éŸ³</option>
                            <option value="baidu">ç™¾åº¦</option>
                            <option value="sspai">å°‘æ•°æ´¾</option>
                            <option value="history">å†å²</option>
                        </select>
                    </div>
                    <div id="hotList" class="space-y-1.5 overflow-y-auto flex-1">
                        <div class="text-center py-6 text-gray-500 text-sm animate-pulse">åŠ è½½ä¸­...</div>
                    </div>
                </div>
            </div>
            
            <!-- æ¯æ—¥ä¸€è¨€ -->
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-black p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] relative overflow-hidden h-[320px] flex flex-col">
                <div class="absolute top-0 right-0 text-5xl opacity-10">ğŸ’­</div>
                <div class="relative z-10 flex-1 flex flex-col h-full">
                    <div class="flex items-center gap-2 mb-3 flex-shrink-0">
                        <span class="text-xl">ğŸ“–</span>
                        <h3 class="font-bold">æ¯æ—¥ä¸€è¨€</h3>
                    </div>
                    <div id="dailyQuote" class="text-gray-700 leading-relaxed italic flex-1 flex items-center text-base">
                        <span class="animate-pulse">åŠ è½½ä¸­...</span>
                    </div>
                    <div class="flex justify-end mt-3 flex-shrink-0">
                        <button 
                            onclick="loadDailyQuote()" 
                            class="px-3 py-1.5 border-2 border-black bg-white font-bold hover:bg-black hover:text-white transition text-xs"
                            title="æ¢ä¸€å¥"
                        >
                            ğŸ”„ æ¢ä¸€å¥
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å¿«æ·åŠŸèƒ½åŒº -->
        <div class="mb-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <a href="https://www.acg2day.net" target="_blank" class="bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100 p-6 border-2 border-black hover:translate-x-1 hover:translate-y-1 transition-transform shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none flex flex-col items-center text-center relative overflow-hidden">
                <div class="absolute top-0 right-0 text-6xl opacity-10">ğŸŒ¸</div>
                <div class="relative z-10">
                    <div class="text-4xl mb-3">ğŸ¨</div>
                    <div class="font-bold text-xl mb-2">ACGåŠ¨æ¼«</div>
                    <div class="text-sm text-gray-600">äºŒæ¬¡å…ƒä¸–ç•Œå…¥å£</div>
                </div>
            </a>
            
            <a href="editor-select.html" class="bg-white p-6 border-2 border-black hover:translate-x-1 hover:translate-y-1 transition-transform shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none flex flex-col items-center text-center">
                <div class="text-4xl mb-3">âœï¸</div>
                <div class="font-bold text-xl mb-2">å†™æ–‡ç« </div>
                <div class="text-sm text-gray-600">åˆ†äº«ä½ çš„æŠ€æœ¯è§è§£</div>
            </a>
            
            <a href="chat.html" class="bg-white p-6 border-2 border-black hover:translate-x-1 hover:translate-y-1 transition-transform shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none flex flex-col items-center text-center">
                <div class="text-4xl mb-3">ğŸ’¬</div>
                <div class="font-bold text-xl mb-2">èŠå¤©ä¸­å¿ƒ</div>
                <div class="text-sm text-gray-600">å›¢é˜Ÿå®æ—¶äº¤æµ</div>
            </a>
            
            <a href="users.html" class="bg-gradient-to-br from-orange-100 via-yellow-100 to-amber-100 p-6 border-2 border-black hover:translate-x-1 hover:translate-y-1 transition-transform shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none flex flex-col items-center text-center relative overflow-hidden">
                <div class="absolute top-0 right-0 text-6xl opacity-10">ğŸ‘¥</div>
                <div class="relative z-10">
                    <div class="text-4xl mb-3">ğŸ‘¥</div>
                    <div class="font-bold text-xl mb-2">å…„å¼Ÿä»¬</div>
                    <div class="text-sm text-gray-600">ç¤¾åŒºæˆå‘˜åˆ—è¡¨</div>
                </div>
            </a>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
            <!-- ä¾§è¾¹æ  -->
            <aside class="md:col-span-1">
                <div class="bg-white border-2 border-black p-5 mb-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
                    <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                        ğŸ“ åˆ†ç±»
                    </h3>
                    <div id="categoryList" class="space-y-2"></div>
                </div>
                
                <div class="bg-white border-2 border-black p-5 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
                    <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                        ğŸ·ï¸ æ ‡ç­¾
                    </h3>
                    <div id="tagList" class="flex flex-wrap gap-2"></div>
                </div>
            </aside>

            <!-- æ–‡ç« åˆ—è¡¨ -->
            <main class="md:col-span-3">
                <div id="articleList" class="space-y-6"></div>
                
                <!-- åˆ†é¡µ -->
                <div id="pagination" class="mt-8 flex justify-center gap-2"></div>
            </main>
        </div>
        
        <!-- åº•éƒ¨ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white border-2 border-black p-6 text-center shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
                <div class="text-4xl font-bold mb-2" id="statArticles">0</div>
                <div class="text-sm text-gray-600">æ–‡ç« æ€»æ•°</div>
            </div>
            <div class="bg-white border-2 border-black p-6 text-center shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
                <div class="text-4xl font-bold mb-2" id="statViews">0</div>
                <div class="text-sm text-gray-600">æ€»æµè§ˆé‡</div>
            </div>
            <div class="bg-white border-2 border-black p-6 text-center shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
                <div class="text-4xl font-bold mb-2" id="statTags">40+</div>
                <div class="text-sm text-gray-600">æŠ€æœ¯æ ‡ç­¾</div>
            </div>
        </div>
    </div>
    
    <!-- åº•éƒ¨ -->
    <footer class="mt-16 border-t-2 border-black bg-white py-8">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-6">
                <!-- Logo å’Œç®€ä»‹ -->
                <div class="text-center md:text-left">
                    <div class="flex items-center justify-center md:justify-start gap-3 mb-4">
                        <img src="picture/002.jpg" alt="GitRubbish Logo" class="w-12 h-12" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                        <div class="w-12 h-12 bg-black text-white hidden items-center justify-center font-bold text-xl">
                            GR
                        </div>
                        <h3 class="text-2xl font-bold">GitRubbish</h3>
                    </div>
                    <p class="text-gray-600 mb-4">è½»é‡æç®€åšå®¢å¹³å°<br>ä¸“æ³¨æŠ€æœ¯åˆ†äº«</p>
                    
                    <!-- ç¤¾äº¤é“¾æ¥ -->
                    <div class="flex items-center justify-center md:justify-start gap-3">
                        <a href="https://github.com/Chenshaojie-boy" target="_blank" class="w-10 h-10 border-2 border-black flex items-center justify-center hover:bg-black hover:text-white transition" title="GitHub">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                        </a>
                        <a href="https://blog.csdn.net/AMDintelHUAWEI?spm=1000.2115.3001.5343" target="_blank" class="w-10 h-10 border-2 border-black flex items-center justify-center hover:bg-black hover:text-white transition" title="CSDNåšå®¢">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                            </svg>
                        </a>
                        <a href="http://1743731420.qzone.qq.com" target="_blank" class="w-10 h-10 border-2 border-black flex items-center justify-center hover:bg-black hover:text-white transition" title="QQç©ºé—´">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
                            </svg>
                        </a>
                    </div>
                </div>
                
                <!-- å¿«é€Ÿé“¾æ¥ -->
                <div class="text-center">
                    <h4 class="font-bold text-lg mb-3">å¿«é€Ÿå¯¼èˆª</h4>
                    <div class="space-y-2">
                        <a href="index.html" class="block text-gray-600 hover:text-black transition">é¦–é¡µ</a>
                        <a href="chat.html" class="block text-gray-600 hover:text-black transition">èŠå¤©</a>
                        <a href="editor-select.html" class="block text-gray-600 hover:text-black transition">å†™æ–‡ç« </a>
                    </div>
                </div>
                
                <!-- å…³äºä½œè€… -->
                <div class="text-center">
                    <h4 class="font-bold text-lg mb-3">å…³äºä½œè€…</h4>
                    <div class="space-y-2 text-sm">
                        <a href="https://github.com/Chenshaojie-boy" target="_blank" class="block text-gray-600 hover:text-black transition">
                            <span class="font-bold">GitHub:</span> Chenshaojie-boy
                        </a>
                        <a href="https://blog.csdn.net/AMDintelHUAWEI?spm=1000.2115.3001.5343" target="_blank" class="block text-gray-600 hover:text-black transition">
                            <span class="font-bold">CSDN:</span> AMDintelHUAWEI
                        </a>
                        <a href="http://1743731420.qzone.qq.com" target="_blank" class="block text-gray-600 hover:text-black transition">
                            <span class="font-bold">QQç©ºé—´:</span> æ˜Ÿæ²³
                        </a>
                        <a href="mailto:1743731420@qq.com" class="block text-gray-600 hover:text-black transition">
                            <span class="font-bold">é‚®ç®±:</span> 1743731420@qq.com
                        </a>
                    </div>
                </div>
                
                <!-- QQ ç¾¤ -->
                <div class="text-center">
                    <h4 class="font-bold text-lg mb-3">åŠ å…¥ç¤¾åŒº</h4>
                    <p class="text-gray-600 mb-2 text-sm">QQ äº¤æµç¾¤</p>
                    <p class="font-bold text-lg mb-2">849498477</p>
                    <img src="picture/001.jpg" alt="QQç¾¤äºŒç»´ç " class="mx-auto w-28 h-28 border-2 border-black" onerror="this.style.display='none'">
                </div>
            </div>
            
            <!-- åº•éƒ¨ä¿¡æ¯ -->
            <div class="text-center pt-6 border-t-2 border-gray-200">
                <div class="flex items-center justify-center gap-4 mb-3 text-sm text-gray-600">
                    <a href="easter-egg.html" class="hover:text-black transition">å…³äºæˆ‘ä»¬</a>
                    <span>|</span>
                    <a href="easter-egg.html" class="hover:text-black transition">è”ç³»æ–¹å¼</a>
                    <span>|</span>
                    <a href="easter-egg.html" class="hover:text-black transition">éšç§æ”¿ç­–</a>
                    <span>|</span>
                    <a href="easter-egg.html" class="hover:text-black transition">ä½¿ç”¨æ¡æ¬¾</a>
                </div>
                <p class="text-sm text-gray-500">&copy; 2025 GitRubbish. All rights reserved.</p>
                <p class="text-xs text-gray-400 mt-2">Built with â¤ï¸ by Chenshaojie-boy</p>
            </div>
        </div>
    </footer>

    <!-- Live2D çœ‹æ¿å¨˜ -->
    <script src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>

    <script src="js/common.js"></script>
    <script>
        let currentPage = 1;
        let selectedCategory = null;
        let selectedTags = [];
        let searchKeyword = '';

        // åˆå§‹åŒ–
        window.onload = () => {
            checkLoginStatus();
            loadCategories();
            loadTags();
            loadArticles();
            startDigitalClock();
            loadDailyQuote();
            loadHotSearch();
        };

        // æ•°ç æ—¶é’Ÿ
        function startDigitalClock() {
            function updateClock() {
                const now = new Date();
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                const date = `${now.getMonth() + 1}/${now.getDate()}`;
                
                const clockElement = document.getElementById('digitalClock');
                if (clockElement) {
                    clockElement.textContent = `${date} ${hours}:${minutes}:${seconds}`;
                }
            }
            
            updateClock();
            setInterval(updateClock, 1000);
        }

        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const token = localStorage.getItem('token');
            const userInfoStr = localStorage.getItem('userInfo');
            const userActions = document.getElementById('userActions');
            
            console.log('Token:', token);
            console.log('UserInfo:', userInfoStr);
            
            if (token && userInfoStr) {
                try {
                    const user = JSON.parse(userInfoStr);
                    userActions.innerHTML = `
                        <a href="editor-select.html" class="px-4 py-2 bg-black text-white font-bold hover:translate-x-0.5 hover:translate-y-0.5 transition-transform shadow-[2px_2px_0px_0px_rgba(0,0,0,0.3)]">
                            âœï¸ å†™æ–‡ç« 
                        </a>
                        <a href="profile.html" class="px-4 py-2 border-2 border-black font-bold hover:bg-black hover:text-white transition">
                            ğŸ‘¤ ${user.nickname || user.username}
                        </a>
                    `;
                } catch (e) {
                    console.error('è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:', e);
                    userActions.innerHTML = `
                        <a href="login.html" class="px-4 py-2 border-2 border-black font-bold hover:bg-black hover:text-white transition">
                            ç™»å½•
                        </a>
                    `;
                }
            } else {
                userActions.innerHTML = `
                    <a href="login.html" class="px-4 py-2 border-2 border-black font-bold hover:bg-black hover:text-white transition">
                        ç™»å½•
                    </a>
                `;
            }
        }

        // åŠ è½½åˆ†ç±»
        function loadCategories() {
            const categories = ['æŠ€æœ¯ç¬”è®°', 'ä»£ç ç‰‡æ®µ', 'é¡¹ç›®ç»éªŒ', 'å·¥å…·æ¨è'];
            const categoryList = document.getElementById('categoryList');
            
            categoryList.innerHTML = `
                <div class="cursor-pointer p-2 border-2 border-black hover:bg-black hover:text-white transition ${!selectedCategory ? 'bg-black text-white' : 'bg-white'}" 
                     onclick="filterByCategory(null)">
                    å…¨éƒ¨
                </div>
                ${categories.map((cat, index) => `
                    <div class="cursor-pointer p-2 border-2 border-black hover:bg-black hover:text-white transition ${selectedCategory === cat ? 'bg-black text-white' : 'bg-white'}" 
                         onclick="filterByCategory('${cat}')">
                        ${cat}
                    </div>
                `).join('')}
            `;
        }

        // åŠ è½½æ ‡ç­¾
        function loadTags() {
            // ä¸æ–‡ç« ç¼–è¾‘é¡µé¢å®Œå…¨ä¸€è‡´çš„æ ‡ç­¾åˆ—è¡¨
            const tags = [
                // å‰ç«¯å¼€å‘
                'JavaScript', 'TypeScript', 'Vue', 'React', 'Angular', 'HTML', 'CSS', 'Tailwind', 'Bootstrap', 'Webpack', 'Vite',
                // åç«¯å¼€å‘
                'Node.js', 'Express', 'Nest.js', 'Java', 'Spring Boot', 'Spring Cloud', 'MyBatis', 'Python', 'Django', 'Flask', 'FastAPI', 'Go', 'Gin', 'Rust',
                // æ•°æ®åº“
                'MySQL', 'PostgreSQL', 'MongoDB', 'Redis', 'SQL', 'NoSQL',
                // è¿ç»´éƒ¨ç½²
                'Docker', 'Kubernetes', 'CI/CD', 'Linux', 'Nginx', 'Jenkins',
                // åµŒå…¥å¼
                'åµŒå…¥å¼', 'STM32', 'Arduino', 'ESP32', 'ESP8266', '51å•ç‰‡æœº', 'AVR', 'ARM', 'Cortex-M', 'FreeRTOS', 'RT-Thread', 'HALåº“', 'Keil', 'IAR',
                // ç‰©è”ç½‘
                'ç‰©è”ç½‘', 'IoT', 'MQTT', 'CoAP', 'LoRaWAN', 'NB-IoT', 'Zigbee', 'Bluetooth', 'æ™ºèƒ½å®¶å±…', 'ä¼ æ„Ÿå™¨', 'è¾¹ç¼˜è®¡ç®—',
                // é€šç”¨æŠ€èƒ½
                'Git', 'ç®—æ³•', 'æ•°æ®ç»“æ„', 'è®¾è®¡æ¨¡å¼', 'å¾®æœåŠ¡', 'æ€§èƒ½ä¼˜åŒ–', 'å®‰å…¨', 'æµ‹è¯•', 'å‰ç«¯', 'åç«¯', 'å…¨æ ˆ'
            ];
            const tagList = document.getElementById('tagList');
            
            tagList.innerHTML = tags.map(tag => `
                <span class="cursor-pointer px-3 py-1 border border-black text-sm hover:bg-black hover:text-white ${selectedTags.includes(tag) ? 'bg-black text-white' : ''}" 
                      onclick="toggleTag('${tag}')">
                    ${tag}
                </span>
            `).join('');
        }

        // åŠ è½½æ–‡ç« åˆ—è¡¨
        async function loadArticles() {
            try {
                const response = await axios.get(`${API_BASE_URL}/article/list`, {
                    params: {
                        page: currentPage,
                        size: 10,
                        category: selectedCategory,
                        tags: selectedTags.join(','),
                        keyword: searchKeyword
                    }
                });
                
                if (response.data.code === 200) {
                    const { records, total, pages } = response.data.data;
                    renderArticles(records);
                    renderPagination(pages);
                    updateStats(total);
                }
            } catch (error) {
                showMessage('åŠ è½½æ–‡ç« å¤±è´¥', 'error');
            }
        }
        
        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats(total) {
            document.getElementById('statArticles').textContent = total;
            // è®¡ç®—çœŸå®çš„æ€»æµè§ˆé‡
            loadTotalViews();
        }
        
        // åŠ è½½æ€»æµè§ˆé‡
        async function loadTotalViews() {
            try {
                const response = await axios.get(`${API_BASE_URL}/article/list`, {
                    params: {
                        page: 1,
                        size: 1000 // è·å–æ‰€æœ‰æ–‡ç« 
                    }
                });
                
                if (response.data.code === 200) {
                    const articles = response.data.data.records || [];
                    const totalViews = articles.reduce((sum, article) => sum + (article.viewCount || 0), 0);
                    document.getElementById('statViews').textContent = totalViews;
                }
            } catch (error) {
                console.error('åŠ è½½æµè§ˆé‡å¤±è´¥', error);
                // é™çº§ï¼šæ˜¾ç¤ºä¼°ç®—å€¼
                const total = parseInt(document.getElementById('statArticles').textContent) || 0;
                document.getElementById('statViews').textContent = Math.floor(total * 50);
            }
        }

        // æ¸²æŸ“æ–‡ç« åˆ—è¡¨
        function renderArticles(articles) {
            const articleList = document.getElementById('articleList');
            
            if (articles.length === 0) {
                articleList.innerHTML = '<div class="text-center text-gray-500 py-12">æš‚æ— æ–‡ç« </div>';
                return;
            }
            
            articleList.innerHTML = articles.map(article => `
                <div class="bg-white border-2 border-black p-6 cursor-pointer hover:translate-x-1 hover:translate-y-1 transition-transform shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none" 
                     onclick="window.location.href='article-detail.html?id=${article.id}'">
                    <h2 class="text-2xl font-bold mb-3 hover:text-gray-700 transition">${article.title}</h2>
                    <p class="text-gray-600 mb-4 line-clamp-2">${article.summary || 'æš‚æ— æ‘˜è¦'}</p>
                    <div class="flex items-center gap-4 text-sm text-gray-500 mb-3">
                        <span class="flex items-center gap-1">ğŸ“… ${formatDate(article.createTime)}</span>
                        <span class="flex items-center gap-1">ğŸ“ ${article.category || 'æœªåˆ†ç±»'}</span>
                        <span class="flex items-center gap-1">â¤ï¸ ${article.likeCount || 0}</span>
                        <span class="flex items-center gap-1">ğŸ’¬ ${article.commentCount || 0}</span>
                    </div>
                    ${article.tags ? `
                        <div class="flex gap-2 flex-wrap">
                            ${article.tags.split(',').map(tag => `
                                <span class="px-2 py-1 bg-black text-white text-xs font-medium">#${tag}</span>
                            `).join('')}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // æ¸²æŸ“åˆ†é¡µ
        function renderPagination(totalPages) {
            const pagination = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let html = '';
            
            if (currentPage > 1) {
                html += `<button onclick="changePage(${currentPage - 1})" class="px-4 py-2 border-2 border-black hover:bg-black hover:text-white">ä¸Šä¸€é¡µ</button>`;
            }
            
            for (let i = 1; i <= totalPages; i++) {
                if (i === currentPage) {
                    html += `<button class="px-4 py-2 bg-black text-white font-bold">${i}</button>`;
                } else {
                    html += `<button onclick="changePage(${i})" class="px-4 py-2 border-2 border-black hover:bg-black hover:text-white">${i}</button>`;
                }
            }
            
            if (currentPage < totalPages) {
                html += `<button onclick="changePage(${currentPage + 1})" class="px-4 py-2 border-2 border-black hover:bg-black hover:text-white">ä¸‹ä¸€é¡µ</button>`;
            }
            
            pagination.innerHTML = html;
        }

        // åˆ‡æ¢é¡µç 
        function changePage(page) {
            currentPage = page;
            loadArticles();
            window.scrollTo(0, 0);
        }

        // åˆ†ç±»ç­›é€‰
        function filterByCategory(category) {
            selectedCategory = category;
            currentPage = 1;
            loadCategories();
            loadArticles();
        }

        // æ ‡ç­¾ç­›é€‰
        function toggleTag(tag) {
            const index = selectedTags.indexOf(tag);
            if (index > -1) {
                selectedTags.splice(index, 1);
            } else {
                selectedTags.push(tag);
            }
            currentPage = 1;
            loadTags();
            loadArticles();
        }

        // æœç´¢
        function handleSearch() {
            searchKeyword = document.getElementById('searchInput').value;
            currentPage = 1;
            loadArticles();
        }

        // å›è½¦æœç´¢
        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });

        // åŠ è½½æ¯æ—¥ä¸€è¨€
        async function loadDailyQuote() {
            const quoteElement = document.getElementById('dailyQuote');
            
            try {
                // ä½¿ç”¨fetchè·å–æ¯æ—¥ä¸€è¨€ï¼ˆå› ä¸ºè¿”å›çš„æ˜¯çº¯æ–‡æœ¬ï¼‰
                const response = await fetch('https://v.api.aa1.cn/api/yiyan/index.php');
                const quote = await response.text();
                
                // æ·»åŠ æ·¡å…¥åŠ¨ç”»æ•ˆæœ
                quoteElement.style.opacity = '0';
                setTimeout(() => {
                    quoteElement.innerHTML = `"${quote}"`;
                    quoteElement.style.transition = 'opacity 0.5s';
                    quoteElement.style.opacity = '1';
                }, 100);
            } catch (error) {
                console.error('åŠ è½½æ¯æ—¥ä¸€è¨€å¤±è´¥:', error);
                quoteElement.innerHTML = '"ä»£ç å¦‚è¯—ï¼ŒæŠ€æœ¯å¦‚ç”»ï¼Œç”¨å¿ƒé›•ç¢æ¯ä¸€è¡Œã€‚"';
            }
        }

        // åŠ è½½çƒ­æœæ¦œ
        async function loadHotSearch() {
            const hotList = document.getElementById('hotList');
            const hotType = document.getElementById('hotType').value;
            
            hotList.innerHTML = '<div class="text-center py-8 text-gray-500 animate-pulse">åŠ è½½ä¸­...</div>';
            
            try {
                const apiKey = '1fbd2919636ddc654cc83e8ac6de3722';
                const response = await fetch(`https://api.oick.cn/api/hot?type=${hotType}&apikey=${apiKey}`);
                const data = await response.json();
                
                if (data.code === 200 && data.data && data.data.length > 0) {
                    // åªæ˜¾ç¤ºå‰10æ¡
                    const topItems = data.data.slice(0, 10);
                    
                    hotList.innerHTML = topItems.map((item, index) => {
                        const rankClass = index < 3 ? 'bg-red-500 text-white' : 'bg-gray-200';
                        return `
                            <div class="flex items-center gap-3 p-2 hover:bg-white hover:bg-opacity-50 transition rounded cursor-pointer" onclick="window.open('${item.url || '#'}', '_blank')">
                                <span class="w-6 h-6 flex items-center justify-center ${rankClass} font-bold text-sm rounded flex-shrink-0">
                                    ${index + 1}
                                </span>
                                <div class="flex-1 min-w-0">
                                    <div class="text-sm font-medium truncate">${item.title}</div>
                                    ${item.hot ? `<div class="text-xs text-gray-500">${item.hot}</div>` : ''}
                                </div>
                                ${index < 3 ? '<span class="text-red-500">ğŸ”¥</span>' : ''}
                            </div>
                        `;
                    }).join('');
                } else {
                    hotList.innerHTML = '<div class="text-center py-8 text-gray-500">æš‚æ— æ•°æ®</div>';
                }
            } catch (error) {
                console.error('åŠ è½½çƒ­æœå¤±è´¥:', error);
                hotList.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <div class="mb-2">åŠ è½½å¤±è´¥</div>
                        <button onclick="loadHotSearch()" class="px-4 py-2 border-2 border-black bg-white font-bold hover:bg-black hover:text-white transition text-sm">
                            é‡è¯•
                        </button>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>